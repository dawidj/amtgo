<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!--
    index.html - part of amtc-web, part of amtc
    https://github.com/schnoddelbotz/amtc
  -->
  <meta name="description" content="Intel AMT/vPro remote power Management">
  <meta name="author" content="schnoddelbotz">
  <link rel="shortcut icon" type="image/x-icon" href="amtc-favicon.png" />
  <title>amtc-web - AMT/DASH remote power management</title>
  <link href="css/styles.css" rel="stylesheet">
</head>
<body>

<!-- startup splash screen -->
<div id="backdrop" class="modal-backdrop fade in"></div>
<div class="modal fade in" id="splash" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" style="display:block">
  <div class="modal-dialog">
    <div class="modal-content" style="text-align:center; margin:20px; font-size:8em; background-color:transparent; border:0; box-shadow:none; text-shadow: 2px 2px #444;">
        <span style="color:white; font-weight:bold">amtc</span><br>
        <div class="modal-body" >
          <span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x grey"></i>
            <i class="fa fa-bolt fa-fw fa-stack-1x flash"></i>
          </span>
        </div>
        <span style="color:white; font-weight:bold">web</span>
    </div>
  </div>
</div>
<!-- templates/_optionsetEdit.hbs.html (_optionsetEdit) -->
<script type="text/x-handlebars" id="_optionsetEdit">
<form id="optionsetEditForm">
 <fieldset>
    <div class="form-group">
      <label for="name">Option set name</label>
      {{input class="form-control" type="text" value=model.name insert-newline="doneEditingReturn" placeholder="shorthand name"}}
      <p class="help-block">Choose a simple name that reflects settings below.</p>
    </div>
    <div class="form-group">
      <label for="description">Description</label>
        {{input class="form-control" type="text" value=model.description insert-newline="doneEditingReturn" placeholder="..."}}
    </div>
    <div class="form-group">
      <label for="description">AMT password file</label>
        {{input class="form-control" type="text" value=model.opt_passfile insert-newline="doneEditingReturn" placeholder="/path/to/file"}}
    </div>
    <div class="form-group">
      <label for="description">Connection timeout [s]</label>
        {{input class="form-control" type="text" value=model.opt_timeout insert-newline="doneEditingReturn" size=2 placeholder="10"}}
    </div>
    {{#unless sw_dash}}
      <div class="checkbox">
        <label>
          {{input type="checkbox" checked=model.sw_v5}} Enforce AMT v5 EOI (see also: <a href="http://en.wikipedia.org/wiki/Intel_AMT_versions">Intel AMT versions</a>)
        </label>
      </div>
    {{/unless}}
    {{#unless sw_v5}}
      <div class="checkbox">
        <label>
          {{input type="checkbox" checked=model.sw_dash}} Enforce DASH/WsMan; required for AMT 9.0 and greater. Slower.
        </label>
      </div>
    {{/unless}}
    <div class="checkbox">
      <label>
        {{input type="checkbox" checked=model.sw_scan22}} Enable SSH portscan
      </label>
    </div>
    <div class="checkbox">
      <label>
        {{input type="checkbox" checked=model.sw_scan3389}} Enbale RDP portscan
      </label>
    </div>
    <div class="checkbox">
      <label>
        {{input type="checkbox" checked=model.sw_usetls}} use HTTPS/TLS (TCP port 16993)
      </label>
    </div>
    {{#if model.sw_usetls}}
      <div class="checkbox">
        <label>
          {{input type="checkbox" checked=model.sw_skipcertchk}} Skip TLS cert verification
        </label>
      </div>
      {{#unless model.sw_skipcertchk}}
        <div class="form-group">
          <label for="description">TLS CA cert file</label>
            {{input class="form-control" type="text" value=model.opt_cacertfile insert-newline="doneEditingReturn"}}
        </div>
      {{/unless}}
    {{/if}}
 </fieldset>
</form>
<div class="clearboth"></div><br>
</script>

<!-- templates/_ouSelection.hbs.html (_ouSelection) -->
<script type="text/x-handlebars" id="_ouSelection">
{{#if controllers.ous.ous.content}}
  {{#each controllers.ous.ous.content as |node|}}
    {{#if node.isRootLevel}}
        {{tree-menu-node node=node action="selectNode" selectedNode=selectedNode}}
    {{/if}}
  {{/each}}
{{/if}}
</script>

<!-- templates/_scheduleEdit.hbs.html (_scheduleEdit) -->
<script type="text/x-handlebars" id="_scheduleEdit">
<form id="optionsetEditForm">
 <fieldset>
    <div class="form-group">
      <label for="description">Description</label>
        {{input class="form-control" type="text" value=model.description insert-newline="doneEditingReturn" placeholder="Power-Up|Down Room when ..."}}
    </div>

    <div class="checkbox"><label>{{input type="checkbox" checked=model.on_monday}} Monday</label></div>
    <div class="checkbox"><label>{{input type="checkbox" checked=model.on_tuesday}} Tuesday</label></div>
    <div class="checkbox"><label>{{input type="checkbox" checked=model.on_wednesday}} Wednesday</label></div>
    <div class="checkbox"><label>{{input type="checkbox" checked=model.on_thursday}} Thursday</label></div>
    <div class="checkbox"><label>{{input type="checkbox" checked=model.on_friday}} Friday</label></div>
    <div class="checkbox"><label>{{input type="checkbox" checked=model.on_saturday}} Saturday</label></div>
    <div class="checkbox"><label>{{input type="checkbox" checked=model.on_sunday}} Sunday</label></div>

    <div class="form-group">
      <label for="start_time">Start time</label>
      {{input class="form-control" type="time" value=model.human_start_time insert-newline="doneEditingReturn"}}
    </div>

    <div class="form-group">
      <label for="action">OU / Room</label>
      {{#if controllers.ous.ous.content}}
        {{my-select
          content=controllers.ous.ous.content
          selection=model.ou_id
          action=(action (mut model.ou_id))
          prompt="Choose Organizational Unit / Room"
          optionValuePath="id"
          optionLabelPath="name"
        }}
      {{/if}}
    </div>

    <div class="form-group">
      <label for="action">Action</label>
      {{my-select
        content=validCommands
        selection=model.amtc_cmd
        action=(action (mut newCommand))
        optionValuePath="cchar"
        optionLabelPath="cmd"
        comparisonAttr="cchar"
        prompt="Select command to execute"
      }}
    </div>

    <div class="form-group">
      <label>Delay</label>
        {{input class="form-control" type="number" step="any" min="0" value=model.amtc_delay insert-newline="doneEditingReturn" placeholder="Delay in seconds between each PC"}}
    </div>

 </fieldset>
</form>
<div class="clearboth"></div><br>
</script>

<!-- templates/_userEdit.hbs.html (_userEdit) -->
<script type="text/x-handlebars" id="_userEdit">
<form id="userEditForm">
 <fieldset>
    <div class="form-group">
      <label for="name">Username</label>
      {{input class="form-control" type="text" value=model.name insert-newline="doneEditingReturn" placeholder="username"}}
    </div>
    <div class="form-group">
      <label for="name">Full name</label>
      {{input class="form-control" type="text" value=model.fullname insert-newline="doneEditingReturn" placeholder="John Doe"}}
    </div>
    <div class="form-group">
      <label for="optionset">Root OU</label>
      {{#if controllers.ous.ous.content}}
        {{my-select
          content=controllers.ous.ous.content
          selection=model.ou_id
          action=(action (mut model.ou_id))
          prompt="Choose Organizational Unit / Room"
          optionValuePath="id"
          optionLabelPath="name"
        }}
      {{/if}}
      <p class="help-block">Toplevel OU user may access (only one supported atm)</p>
    </div>
    <div class="checkbox">
      <label>
        {{input type="checkbox" checked=model.is_admin}} User has admin privileges
      </label>
    </div>
    <div class="checkbox">
      <label>
        {{input type="checkbox" checked=model.is_enabled}} Enable account
      </label>
    </div>
    <div class="checkbox">
      <label>
        {{input type="checkbox" checked=model.can_control}} Has permission to power-control (view only otherwise)
      </label>
    </div>
 </fieldset>
</form>
</script>

<!-- templates/addHostsWizard.hbs.html (addHostsWizard) -->
<script type="text/x-handlebars" id="addHostsWizard">
<div class="row">
  <div class="col-lg-5">
    <h3>Add hosts to OU {{name}}</h3>
    <form id="addHostsWizardForm">
      <fieldset>
        <div class="form-group">
          <label for="name">Hostname</label>
          {{input class="form-control" type="text" placeholder="my-example" value=hostname insert-newline="saveNewHosts"}}
          <p class="help-block">For a single host, provide the FQDN</p>
        </div>
        <div class="form-group">
          <label>Add multiple hosts</label>
          <div class="checkbox">
            <label>
              {{input type="checkbox" checked=addMultiple}} Add multiple hosts at once
            </label>
          </div>
        </div>
        {{#if addMultiple}}
          <div class="form-group">
            <label for="description">Number of hosts to add</label>
            {{input class="form-control" type="number" value=numHosts insert-newline="saveNewHosts"}}
          </div>
          <div class="form-group">
            <label for="description">Start at host number...</label>
            {{input class="form-control" type="number" value=startNum insert-newline="saveNewHosts"}}
          </div>
          <div class="form-group">
            <label for="description">Pad host number with this amount of zeros</label>
            {{input class="form-control" type="number" value=padNum insert-newline="saveNewHosts"}}
            <p class="help-block"></p>
          </div>
          <div class="form-group">
            <label for="description">Domain name</label>
            {{input class="form-control" type="text" placeholder="example.com" value=domainName insert-newline="saveNewHosts"}}
            <p class="help-block"></p>
          </div>
        {{/if}}
      </fieldset>
    </form>
  </div>
  <div class="col-lg-7">
    {{#if hostname}}
      <h3>Preview</h3>
      <div id="addHostsPreview">
        {{#each hostsToAdd as |host|}}
          <div class="pc preview"><i class="fa fa-desktop"></i> {{host}}</div>
        {{/each}}
        <div class="clearfix"><br><br></div>
      </div>
      <div class="clearfix"></div>
      <br>

      <button class="btn btn-default" {{action 'saveNewHosts'}}><span class="fa fa-save"></span> Save new host(s)</button>
    {{/if}}
  </div>
</div>
</script>

<!-- templates/application.hbs.html (application) -->
<script type="text/x-handlebars" id="application">
<div id="wrapper">
<nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="">
          <span class="brand">{{appName}}</span>
          <span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x lightgrey"></i>
            <i id="bolt" class="fa fa-bolt fa-fw fa-stack-1x grey flash"></i>
          </span>
          <i class="hidden-xs">remote. power. management.</i>
        </a>
    </div>
    <!-- /.navbar-header -->

    {{#if controllers.login.isLoggedIn}}
    <ul class="nav navbar-top-links navbar-right">
        <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                <i class="fa fa-bell fa-fw"></i>  <i class="fa fa-caret-down"></i>
            </a>
            <ul class="dropdown-menu dropdown-messages">
              {{#if controllers.notifications.notifications}}
                {{#each controllers.notifications.notifications.content as |msg|}}
                  <li>
                    <a href="#">
                      <div>
                        <strong>FIXME {{msg.user_id.fullname}}</strong>
                        <span class="pull-right text-muted">
                            <em>{{format-from-now msg.tstamp}}</em>
                        </span>
                      </div>
                      <div><i class={{msg.cssClass}}></i> {{msg.message}}</div>
                    </a>
                  </li>
                  <li class="divider"></li>
                {{/each}}
              {{else}}
                <i class="fa fa-spinner fa-spin"></i> Loading latest notifications ...
              {{/if}}
              <li>
                  <a class="text-center" href="#">
                      <strong>read all notifications</strong>
                      <i class="fa fa-angle-right"></i>
                  </a>
              </li>
            </ul>
            <!-- /.dropdown-messages -->
        </li>

        <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                <i class="fa fa-user fa-fw"></i>  <i class="fa fa-caret-down"></i>
            </a>
            <ul class="dropdown-menu dropdown-user">
                <li><a href="#"><i class="fa fa-user fa-fw"></i> User Profile</a>
                </li>
                <li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>
                </li>
                <li class="divider"></li>
                <li>
                  <a {{action 'goLogout'}}><i class="fa fa-sign-out fa-fw"></i> Logout</a>
                </li>
            </ul>
            <!-- /.dropdown-user -->
        </li>
        <!-- /.dropdown -->
    </ul>
    {{/if}}
    <!-- /.navbar-top-links -->

    <div class="navbar-default sidebar" role="navigation">
        <div class="sidebar-nav navbar-collapse">
            <ul class="nav" id="side-menu">
            <!--
                <li class="sidebar-search">
                    <div class="input-group custom-search-form">
                        <input type="text" class="form-control" placeholder="Search host or room">
                        <span class="input-group-btn">
                        <button class="btn btn-default" type="button">
                            <i class="fa fa-search"></i>
                        </button>
                    </span>
                    </div>
                </li>
            -->
            {{#if controllers.login.isLoggedIn}} <!-- hide menu items that require login -->
                <li>
                    <a href="#"><i class="fa fa-dashboard fa-fw"></i> Dashboard</a>
                </li>
                <li>
                    <a href="#">
                        <i class="fa fa-sitemap fa-fw"></i> Monitor / Control Hosts
                    </a>
                    <ul class="nav nav-second-level in">
                        {{partial "ouSelection"}}
                    </ul>
                </li>
                {{#linkTo 'logs' tagName="li"}}
                    <a href="#/logs"><i class="fa fa-align-left fa-fw"></i> OS and Powerstate Logs</a>
                {{/linkTo}}
                {{#linkTo 'energy' tagName="li"}}
                    <a href="#/energy"><i class="fa fa-area-chart fa-fw"></i> Energy Consumption</a>
                {{/linkTo}}
                <li>
                    <a href="#"><i class="fa fa-wrench fa-fw"></i> Administration<span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level">
                        <li>
                            <a href="#/ous"><i class="fa fa-university fa-fw"></i> Hosts and Rooms</a>
                        </li>
                        <li>
                            <a href="#/schedules"><i class="fa fa-clock-o fa-fw"></i> Power Schedule</a>
                        </li>
                        <li>
                            <a href="#/users"><i class="fa fa-users fa-fw"></i> Users</a>
                        </li>
                        <li>
                            <a href="#/systemhealth"><i class="fa fa-heartbeat fa-fw"></i> System health</a>
                        </li>
                        <li>
                            <a href="#/optionsets"><i class="fa fa-terminal fa-fw"></i> Basic Configuration</a>
                        </li>
                    </ul>
                    <!-- /.nav-second-level -->
                </li>
            {{else}}
             <li><a href="#/login"><i class="fa fa-user fa-fw"></i> Login</a></li>
            {{/if}} <!-- / hide menu items that require login -->
                <li>
                    <a href="#"><i class="fa fa-ambulance fa-fw"></i> Help<span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level">
                        <li> <a href="#/page/configure-amt"><i class="fa fa-wrench fa-fw"></i> Configuring AMT</a> </li>
                        <li> <a href="#/page/first-steps"><i class="fa fa-child fa-fw"></i> {{appName}} First Steps</a> </li>
                        <li> <a href="#/page/about"><i class="fa fa-github fa-fw"></i> About, Feedback, ...</a> </li>
                    </ul>
                    <!-- /.nav-second-level -->
                </li>
            </ul>
        </div>
        <!-- /.sidebar-collapse -->
    </div>
    <!-- /.navbar-static-side -->
</nav>

<div id="page-wrapper">
    {{outlet}}
</div>

</div>
</script>

<!-- templates/energy.hbs.html (energy) -->
<script type="text/x-handlebars" id="energy">
<div class="row">
  <div class="col-lg-12">
      <h1 class="page-header">Energy consumption charts</h1>
  </div>
  <div class="col-lg-12">
      <p>Approx....!</p>
  </div>
</div>
</script>

<!-- templates/index.hbs.html (index) -->
<script type="text/x-handlebars" id="index">
<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Dashboard</h1>
    </div>
    <!-- /.col-lg-12 -->
</div>
<!-- /.row -->

<!-- Colorful big numbers OS header-->
<div class="row">
    <div class="col-lg-3 col-md-6">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-3">
                        <i class="fa fa-linux fa-5x" title="{{controllers.laststates.stateSSHList}}"></i>
                    </div>
                    <div class="col-xs-9 text-right">
                        <div class="huge">{{controllers.laststates.stateSSH}}</div>
                        <div>running Linux</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-md-6">
        <div class="panel panel-green">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-3">
                        <i class="fa fa-windows fa-5x" title="{{controllers.laststates.stateRDPList}}"></i>
                    </div>
                    <div class="col-xs-9 text-right">
                        <div class="huge">{{controllers.laststates.stateRDP}}</div>
                        <div>running Windows</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-md-6">
        <div class="panel" style="background-color:#aaa">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-3">
                        <i class="fa fa-power-off fa-5x" title="{{controllers.laststates.stateOffList}}"></i>
                    </div>
                    <div class="col-xs-9 text-right">
                        <div class="huge">{{controllers.laststates.stateOff}}</div>
                        <div>powered down</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-md-6">
        <div class="panel panel-red">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-3">
                        <i class="fa fa-frown-o fa-5x" title="{{controllers.laststates.stateUnreachableList}}"></i>
                    </div>
                    <div class="col-xs-9 text-right">
                        <div class="huge">{{controllers.laststates.stateUnreachable}}</div>
                        <div>unreachable</div>
                    </div>
                </div>
            </div>
            <!-- where to link to? ... knock out atm.
            <a href="#">
                <div class="panel-footer">
                    <span class="pull-left">View Details</span>
                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                    <div class="clearfix"></div>
                </div>
            </a>
            -->
        </div>
    </div>
</div>
<!-- 1st col: Stats Graph and "Recent OS / power..." (tbd) and, 2nd col: Notifications -->
<div class="row">
    <div class="col-lg-8">
        <!-- Operational Hosts Log: -->
        <div class="panel panel-default">
            <div class="panel-heading">
                <i class="fa fa-bar-chart-o fa-fw"></i> Operational Hosts Log
                <div class="pull-right">
                    <div class="btn-group">
                        <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                            Show ...
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu pull-right" role="menu">
                            <li><a href="#">Four hours</a>
                            </li>
                            <li><a href="#">One day</a>
                            </li>
                            <li><a href="#">A week</a>
                            </li>
                            <li><a href="#">A month</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- /.panel-heading -->
            <div class="panel-body">
                <div id="morris-area-chart"></div>
            </div>
            <!-- /.panel-body -->
        </div>
        <!-- /.panel -->
        <!-- Energy stats: -->
        <div class="panel panel-default">
            <div class="panel-heading">
                <i class="fa fa-clock-o fa-fw"></i> Current energy statistics
            </div>
            <!-- /.panel-heading -->
            <div class="panel-body">
                <i>None yet</i>
            </div>
            <!-- /.panel-body -->
        </div>
        <!-- /.panel -->
    </div>
    <!-- /.col-lg-8 -->
    <!-- Notifications: -->
    <div class="col-lg-4">
        <div class="panel panel-default">
            <div class="panel-heading">
                <i class="fa fa-bell fa-fw"></i> Notifications Panel
            </div>
            <!-- /.panel-heading -->
            <div class="panel-body">
                <div class="list-group">
                    {{#if controllers.notifications.notifications}}
                      {{#each controllers.notifications.notifications.content as |msg|}}
                        <a href="#" class="list-group-item">
                         <i class={{msg.cssClass}}></i> {{msg.message}}
                         <span class="pull-right text-muted small"><em>{{format-from-now msg.tstamp}}</em></span>
                        </a>
                      {{/each}}
                    {{else}}
                      <i class="fa fa-spinner fa-spin"></i> Loading latest notifications ...
                    {{/if}}
                </div>
                <!-- /.list-group -->
                <a href="#" class="btn btn-default btn-block">View All Alerts</a>
            </div>
            <!-- /.panel-body -->
        </div>
    </div>
    <!-- /.col-lg-4 -->
</div>
<!-- /.row -->
</script>

<!-- templates/login.hbs.html (login) -->
<script type="text/x-handlebars" id="login">
<div class="row">
  <div class="col-lg-12">

  </div>
  <div class="col-lg-4">
  </div>
  <div class="col-lg-4">
    <h1 class="page-header">Login</h1>
    {{#if isLoggedIn}}
      <button class="btn btn-default" {{action 'doLogout'}}><span class="fa fa-fw fa-sign-out"></span> Logout</button>
    {{else}}
      <p>
        {{input id="username" type="text" value=username autofocus=true insert-newline="doLogin" class="form-control" placeholder="username"}}
      </p>
      <p>
        {{input id="password" type="password" value=password insert-newline="doLogin" class="form-control" placeholder="password"}}
      </p>
      <button class="btn btn-default pull-right" {{action 'doLogin'}}><span class="fa fa-fw fa-sign-in"></span> sign in</button>

      {{#if authFailed}}Bad username or password!{{/if}}
    {{/if}}
  </div>
  <div class="col-lg-4">
  </div>
</div></script>

<!-- templates/logout.hbs.html (logout) -->
<script type="text/x-handlebars" id="logout">
<div class="row">
  <div class="col-lg-12">
      <h1 class="page-header">Sign out</h1>
  </div>
  <div class="col-lg-12">
      <p>
        {{#if controllers.login.isLoggedIn}}
            Thanks for logging out... See you soon!
          {{else}}
            You have not signed in yet. Why log out, eh?
        {{/if}}
      </p>
  </div>
</div>
</script>

<!-- templates/logs.hbs.html (logs) -->
<script type="text/x-handlebars" id="logs">
<div class="row">
  <div class="col-lg-12">
      <h1 class="page-header">OS / availability logs</h1>
  </div>
  <div class="col-lg-12">
      <p>Hello world</p>
  </div>
</div>
</script>

<!-- templates/optionset.hbs.html (optionset) -->
<script type="text/x-handlebars" id="optionset">
{{! Display a single OU edit form using partial _optionsetEdit }}
  {{! Display a single OU }}
<div class="row">
  <div class="col-lg-12">
      <h1 class="page-header">Edit Optionset <b>{{model.name}}</b></h1>
  </div>
</div>
<div class="row">
  <div class="col-lg-12">
    {{partial "optionsetEdit"}}
    <div id="editbutton">
      <button {{action "removeOptionset"}} class="btn btn-default"><span class="fa fa-trash"></span> Delete Option set</button>
      <button class="btn btn-default" {{action 'doneEditingReturn'}}><span class="fa fa-save"></span> Save and return</button>
      {{#if isDirty}}<span class="label label-danger">unsaved changes</span>{{/if}}
    </div>
  </div>
</div>
</script>

<!-- templates/optionsets.hbs.html (optionsets) -->
<script type="text/x-handlebars" id="optionsets">
{{! Display /optionsets page: tabular room list view plus actions:add/remove/edit menu  }}
<div class="row">
  <div class="col-lg-10">
    {{outlet}} <!-- see optionsets/index : big table view of rooms -->
  </div>
  <!-- fixme partial ...: -->
  <div class="col-lg-2">
    <h3>Actions</h3>
    <ul>
        <li>{{#link-to 'ous'}}List rooms{{/link-to}}</li>
        <li>{{#link-to 'optionsets'}}List optionsets{{/link-to}}</li>
        <li>{{#link-to 'optionsets.new'}}Add optionset{{/link-to}}</li>
    </ul>
  </div>
</div>
</script>

<!-- templates/ou.hbs.html (ou) -->
<script type="text/x-handlebars" id="ou">
{{! Display a single OU }}
<div class="row">
  <div class="col-lg-5">
      <h1 class="page-header">{{model.name}}</h1>
  </div>
  <div class="col-lg-7">
    <ul class="nav nav-pills viewmode">
      {{#link-to "ou.monitor" tagName="li"}}
        {{#link-to "ou.monitor"}}Control{{/link-to}}
      {{/link-to}}
      {{#link-to "ou.statelog" tagName="li"}}
        {{#link-to "ou.statelog"}}State Log{{/link-to}}
      {{/link-to}}
      <li><a href="#messages-pills" data-toggle="tab">Energy</a></li>
      {{#link-to "ou.edit" tagName="li"}}
        {{#link-to "ou.edit"}}Edit OU{{/link-to}}
      {{/link-to}}
      {{#link-to "ou.hosts" tagName="li"}}
        {{#link-to "ou.hosts"}}Edit Hosts{{/link-to}}
      {{/link-to}}
    </ul>
  </div>
</div>
{{outlet}}
<!-- see ou/edit, ou/monitor, ou/hosts -->
</script>

<!-- templates/ous.hbs.html (ous) -->
<script type="text/x-handlebars" id="ous">
{{! Display /rooms page: tabular room list view plus actions:add/remove/edit menu  }}
<div class="row">
  <div class="col-lg-10">
      {{outlet}} <!-- see rooms/index : big table view of rooms -->
  </div>
  <div class="col-lg-2">
    <h3>Actions</h3>
    <ul>
        <li>{{#link-to 'ous'}}List rooms{{/link-to}}</li>
        <li>{{#link-to 'optionsets'}}List optionsets{{/link-to}}</li>
        <li>{{#link-to 'ous.new'}}Add room{{/link-to}}</li>
    </ul>
  </div>
</div>
</script>

<!-- templates/page.hbs.html (page) -->
<script type="text/x-handlebars" id="page">
{{! Display a single markdown page from DB }}
<div class="row">
  <div class="col-lg-12">
    {{format-markdown page_content}}
  </div>
</div>
</script>

<!-- templates/schedule.hbs.html (schedule) -->
<script type="text/x-handlebars" id="schedule">
{{! Display a single scheduler item }}
  {{! Display a single OU }}
<div class="row">
  <div class="col-lg-12">
      <h1 class="page-header">Edit Job {{model.description}}</h1>
  </div>
</div>
<div class="row">
  <div class="col-lg-12">
    {{partial "scheduleEdit"}}
    <div id="editbutton">
      <button {{action "removeSchedule"}} class="btn btn-default"><span class="fa fa-trash"></span> Delete Job</button>
      <button class="btn btn-default" {{action 'doneEditingReturn'}}><span class="fa fa-save"></span> Save and return</button>
      {{#if isDirty}}<span class="label label-danger">unsaved changes</span>{{/if}}
    </div>
  </div>
</div>
</script>

<!-- templates/schedules.hbs.html (schedules) -->
<script type="text/x-handlebars" id="schedules">
{{! Manage scheduled power-ups/downs }}
<div class="row">
  <div class="col-lg-10">
    {{outlet}} <!-- see schedule/index -->
  </div>
  <div class="col-lg-2">
    <h3>Actions</h3>
    <ul>
        <li>{{#link-to 'schedules'}}Show schedule{{/link-to}}</li>
        <li>{{#link-to 'schedules.new'}}Add item{{/link-to}}</li>
    </ul>
  </div>
</div>
</script>

<!-- templates/setup.hbs.html (setup) -->
<script type="text/x-handlebars" id="setup">
<div class="row">
  <div class="col-lg-12">
      <h1 class="page-header">amtc-web Installation</h1>
  </div>
</div>
{{#if freshsetup}}
  {{#unless preconditionsMet}}
    <div class="row">
      <div class="col-lg-12">
          <h3>Installation precondition tests</h3>
          At least one PHP PDO driver is required.
          <ul id="phptests">
            {{#if phptests}}
            {{#each phptests}}
              <li>
                {{check-mark result}} {{description}}
                {{#unless result}}(potential fix: {{remedy}}){{/unless}}
              </li>
            {{/each}}
            {{else}}
              <i class="fa fa-spinner fa-spin"></i> <i>running tests...</i>
            {{/if}}
          </ul>
      </div>
    </div>
  {{/unless}}

  {{#if preconditionsMet}}
    <div class="row">
      <div class="col-lg-12">
          <div class="alert alert-success">
            Please create an initial user account for amtc-web / amtgo.
          </div>

          <form role="form">

                <div class="form-group">
                    <label>Username</label>
                    {{input type="text" value=mysqlUser class="form-control" placeholder="joe"}}
                </div>
                <div class="form-group">
                    <label>User's full name</label>
                    {{input type="text" value=mysqlHost class="form-control" placeholder="Joe User"}}
                </div>
                <div class="form-group">
                    <label>Password</label>
                    {{input type="password" value=mysqlPassword class="form-control" placeholder="joe,2014-$ecure!"}}
                </div>


              <div class="form-group">
                <div class="alert alert-danger">
                  <b>Warning!</b><br>
                  After submitting this form, you will only be able to come here again by
                  either removing all entries from the database's users table or by
                  completely deleting the database! You may alternatively create additional
                  users by using amtgo via command-line -- see help <pre>amtgo server -h</pre>
                </div>

                <button class="btn btn-default" {{action 'doneEditing'}}><span class="fa fa-save"></span> Create user</button>
              </div>
          </form>
      </div>
    </div>
  {{else}}
    <div class="form-group">
      <div class="alert alert-danger">
        <em>Error!</em>
        Not all preconditions met. Needs to be fixed to proceed with initial installation.<br>
      </div>
    </div>
  {{/if}}
{{else}}
  <div class="row">
    <div class="col-lg-12">
        <div class="alert alert-danger">
          <h3>Installation tool locked</h3>
          <p>As a configuration file already exists at <code>config/siteconfig.php</code>,
             this setup tool is locked.<br> You have to manually remove the file to re-run setup.</p>
        </div>
    </div>
  </div>
{{/if}}

</script>

<!-- templates/systemhealth.hbs.html (systemhealth) -->
<script type="text/x-handlebars" id="systemhealth">
<div class="row">
  <div class="col-lg-12">
      <h1 class="page-header">System health</h1>
      <button {{action 'refresh'}}>Refresh</button>
  </div>
</div>

<div class="row">
  <div class="col-lg-6">
    <h3>system status</h3>
    <dl>
      <dt>amtgo uptime</dt>
      <dd>{{model.systemhealth.uptime}}</dd>

      <dt>amtgo memory usage</dt>
      <dd>{{model.systemhealth.diskfree}}</dd>

      <dt>amtc-web log size</dt>
      <dd>{{model.systemhealth.logsize}}</dd>

      <dt>amtc-web log last entry</dt>
      <dd>{{format-from-now model.systemhealth.logmodtime}}</dd>

      <dt>Server date and time</dt>
      <dd>{{model.systemhealth.datetime}}</dd>
    </dl>
  </div>

  <div class="col-lg-6">
    <h3>database and process status</h3>
    <dl>
      <dt>Monitoring task last started</dt>
      <dd>{{format-from-now model.systemhealth.lastmonitoringstarted}}</dd>

      <dt>Monitoring task last completed</dt>
      <dd>{{format-from-now model.systemhealth.lastmonitoringdone}}</dd>

      <dt>Active jobs according to DB</dt>
      <dd>{{model.systemhealth.activejobs}}</dd>

      <dt>Active go routines</dt>
      <dd>{{model.systemhealth.activeprocesses}} </dd>

      <dt>Monitoring log entries</dt>
      <dd>{{model.systemhealth.monitorcount}}</dd>
    </dl>
    <button {{action 'resetMonitoringJob'}}>Reset monitoring job status</button>
    <button {{action 'flushStatelog'}}>Flush host state log</button>
  </div>
</div>

<div class="row">
  <div class="col-lg-6">
    <h3>amtc-web javascript library versions</h3>
    <dl>
     <dt>EmberJS</dt>     <dd>{{Ember.VERSION}}</dd>
     <dt>Ember Data</dt>  <dd>{{DS.VERSION}}</dd>
     <dt>jQuery</dt>      <dd>{{$.fn.jquery}}</dd>
    </dl>
  </div>

  <div class="col-lg-6">
    <h3>server versions</h3>
    <dl>
     <dt>Go</dt>          <dd>{{model.systemhealth.phpversion}}</dd>
     <dt>amtgo binary</dt>  <dd>{{model.systemhealth.amtcversion}}</dd>
    </dl>
  </div>
</div></script>

<!-- templates/users.hbs.html (users) -->
<script type="text/x-handlebars" id="users">
{{! Display /users page: tabular room list view plus actions:add/remove/edit menu  }}
<div class="row">
  <div class="col-lg-10">
    {{outlet}} <!-- see users/index : big table view of rooms -->
  </div>
  <div class="col-lg-2">
    <h3>Actions</h3>
    <ul>
        <li>{{#link-to 'users'}}List users{{/link-to}}</li>
        <li>{{#link-to 'users.new'}}Add user{{/link-to}}</li>
    </ul>
  </div>
</div>
</script>

<!-- templates/components/my-select.hbs.html (components/my-select) -->
<script type="text/x-handlebars" id="components/my-select">
<select class="form-control" {{action 'change' on='change'}}>
  {{#if prompt}}
    <option disabled selected={{is-not selection}}>
      {{prompt}}
    </option>
  {{/if}}

  {{#each content key="@guid" as |item|}}
    <option value="{{read-path item optionValuePath}}" selected={{is-equal item selection comparisonAttr}}>
      {{#if optionLabelPath}}
        {{read-path item optionLabelPath}}
      {{else}}
        {{item}}
      {{/if}}
    </option>
  {{/each}}
</select>
</script>

<!-- templates/components/state-log.hbs.html (components/state-log) -->
<script type="text/x-handlebars" id="components/state-log">
<svg width="1440" height="10" preserveAspectRatio="none" viewBox="0 0 1440 10" style="width: 100%; max-width:1440px; height: auto;">
  <rect style="fill: transparent; stroke: #ddd;" height="10" width="1440">
    <title>{{host.hostname}}</title>
  </rect>
  {{#each logItems as |item|}}
    <rect x="{{item.posX}}" y="0" width="{{item.sizeX}}" height="10" style="fill:{{item.fillColor}}; stroke-width: 0;">
      <title>{{host.hostname}} beginning {{item.timeBegin}} [{{item.state_amt}}|{{item.open_port}}|{{item.state_http}}]</title>
    </rect>
  {{/each}}
  <text x="2" y="8" style="font-size:9px; letter-spacing:2;">
      {{host.hostname}}
  </text>
</svg></script>

<!-- templates/components/tree-menu-node.hbs.html (components/tree-menu-node) -->
<script type="text/x-handlebars" id="components/tree-menu-node">
{{#if node.hasChildren}}
  <li {{action "toggleExpanded"}}>
    <a href="#">
      {{#if node.isExpanded}}
        <i class="fa fa-folder-open-o" {{action "toggleExpanded"}}></i>
      {{else}}
        <i class="fa fa-folder-o" {{action "toggleExpanded"}}></i>
      {{/if}}
      {{node.name}}
    </a>
  </li>
{{else}}
  <li {{action "selectNode" node}} class={{isSelected}}>
    {{#link-to 'ou.monitor' node}}{{node.name}}{{/link-to}}
  </li>
{{/if}}

{{#if node.isExpanded}}
  {{#each node.children as |child|}}
    <ul class="nav ember-view">
      {{tree-menu-node node=child action="selectNode" selectedNode=selectedNode}}
    </ul>
  {{/each}}
{{/if}}
</script>

<!-- templates/optionsets/index.hbs.html (optionsets/index) -->
<script type="text/x-handlebars" id="optionsets/index">
{{! Display a table with all rooms }}
<h1 class="page-header">AMT(c) Option sets</h1>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Edit</th>
      <th>Name</th>
      <th>AMT v5</th>
      <th>DASH</th>
      <th>Scan SSH</th>
      <th>Scan RDP</th>
      <th>Use TLS</th>
      <th>Skip crt verify</th>
      <th>TLS CA crt</th>
      <th>AMT password file</th>
      <th>Timeout</th>
    </tr>
  </thead>
  <tbody>
  {{#each model}}
    <tr>
      <td>{{#link-to 'optionset.edit' this}}<i class="fa fa-edit"></i>{{/link-to}}</td>
      <td>{{#link-to 'optionset.edit' this}}{{name}}{{/link-to}}</td>
      <td>{{check-mark sw_v5}}</td>
      <td>{{check-mark sw_dash}}</td>
      <td>{{check-mark sw_scan22}}</td>
      <td>{{check-mark sw_scan3389}}</td>
      <td>{{check-mark sw_usetls}}</td>
      <td>{{check-mark sw_skipcertchk}}</td>
      <td>{{opt_cacertfile}}</td>
      <td>{{opt_passfile}}</td>
      <td>{{opt_timeout}}</td>
    </tr>
  {{/each}}
  </tbody>
</table>
</script>

<!-- templates/optionsets/new.hbs.html (optionsets/new) -->
<script type="text/x-handlebars" id="optionsets/new">
<h1 class="page-header">Create a new Optionset</h1>
<p>
  Optionsets are used to apply AMTC command line options (like whether to use TLS, which timeout, which AMT password etc.) to rooms.<br>
  A newly created option set does not get assigned to any room by default.
</p>
{{partial "optionsetEdit"}}
<button class="btn btn-default" {{action 'doneEditingReturn'}}><span class="fa fa-save"></span> Save option set</button>
</script>

<!-- templates/ou/edit.hbs.html (ou/edit) -->
<script type="text/x-handlebars" id="ou/edit">
<div class="row">
  <div class="col-lg-12">
    <form id="ouEditForm">
     <fieldset>
        <div class="form-group">
          <label for="name">OU / room name</label>
          {{input class="form-control" type="text" value=model.name insert-newline="doneEditingReturn"}}
          <p class="help-block">e.g. D 23.2</p>
        </div>
        <div class="form-group">
          <label for="description">OU description</label>
          {{input class="form-control" type="text" value=model.description insert-newline="doneEditingReturn"}}
          <p class="help-block"></p>
        </div>
        <div class="form-group">
          <label for="optionset">Parent OU</label>
          {{#if controllers.ous.ous.content}}
            {{my-select
              content=controllers.ous.ous.content
              action=(action (mut model.parent_id))
              selection=model.parent_id
              prompt="Choose OU"
              optionValuePath="id"
              optionLabelPath="name"
            }}
          {{/if}}
          <p class="help-block">Choose the parent OU (or "folder") for this room</p>
        </div>
        <div class="form-group">
          <label for="optionset">AMT option set</label>
          {{#if controllers.optionsets.optionsets.content}}
            {{my-select
              content=controllers.optionsets.optionsets.content
              action=(action (mut model.optionset_id))
              selection=model.optionset_id
              prompt="Choose AMT Option set"
              optionValuePath="id"
              optionLabelPath="name"
            }}
          {{/if}}
          <p class="help-block">Optionsets may be created ...here... They will NOT be inherited.</p>
        </div>
        <div class="form-group">
          <label for="description">PC idle power rating</label>
          {{input class="form-control" type="text" value=model.idle_power insert-newline="doneEditingReturn"}}
          <p class="help-block">Provide idle power rating to allow generation of approximate energy consumption charts</p>
        </div>
        <div class="checkbox">
          <label>
            {{input type="checkbox" checked=model.logging}} Allow PC state logging via scheduler
          </label>
        </div>
     </fieldset>
    </form>
    <div class="clearboth"></div><br>
    {{#unless isNew}}
    <div id="editbutton">
      <button {{action "removeOu"}} class="btn btn-default"><span class="fa fa-trash"></span> Delete OU</button>
        <!-- fixme use #if isDirty, currently breaks with drop downs... why? -->
        <button class="btn btn-default" {{action 'doneEditingReturn'}}><span class="fa fa-save"></span> Save and return</button>
        {{#if isDirty}}<span class="label label-danger">unsaved changes</span>{{/if}}
    </div>
    {{/unless}}
  </div>
</div>
</script>

<!-- templates/ou/hosts.hbs.html (ou/hosts) -->
<script type="text/x-handlebars" id="ou/hosts">
<div class="row">
  <div class="col-lg-12">
    <p>Select hosts to delete or add new ones using the form at the page bottom.</p>
  </div>
</div>
<div class="row">
  <div class="col-lg-12">
    <h3>Existing hosts</h3>
  </div>
</div>
<div class="row">
  <div class="col-lg-12" id="cfghosts">
    {{#if controllers.hosts.hosts.content}}
        {{#each model.hosts}}
            <div class="pc" hostDbId={{id}}>&nbsp; <i class="fa fa-desktop"></i> {{hostname}}</div>
        {{/each}}
    {{else}}
        No hosts found in this room.
    {{/if}}
  </div>
  {{#if selectedHostsCount}}
    <div class="col-lg-12">
     <p>
      <button class="btn btn-default" {{action 'deleteSelectedHosts'}}>
        <i class="fa fa-trash"></i> DELETE selected {{selectedHostsCount}} hosts
      </button>
    </p>
    </div>
  {{/if}}
</div>

{{partial "addHostsWizard"}}
</script>

<!-- templates/ou/monitor.hbs.html (ou/monitor) -->
<script type="text/x-handlebars" id="ou/monitor">
{{! amtc-web ... live view / monitor + control mode }}
<div class="row">
  <div class="col-lg-12" id="hosts">
    {{#if controllers.laststates.laststates}}
      {{!-- triggers loading laststates - but host display should not depend on it --}}
    {{/if}}
    {{#if controllers.hosts.hosts}}
      {{#each model.hosts as |host|}}
        <div class="pc {{host.laststate.amtStateCssClass}} {{host.laststate.openPortCssClass}}" hostDbId={{host.id}}>
          <div>
            <span class="porticon">
              {{#if host.laststate}}
                {{host.laststate.openPortIcon}}
              {{else}}
                <i class="fa fa-fw fa-question"></i>
              {{/if}}
            </span>
            <span class="hostname">{{host.hostname}}</span>
          </div>
          <div class="message">
            {{#if host.laststate}}
              {{host.laststate.lastScan}}
            {{else}}
              No logged data yet
            {{/if}}
          </div>
        </div>
      {{/each}}
    {{/if}}
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    {{#if model.hosts.length}}
    <div id="livectrl">
      <h5>Select hosts above like files in Finder/Explorer or by state below</h5>
      <p id="hselect">
        <div id="S_ssh"  {{action "selectByState" "ssh"}}  class="S0 ssh pc"><i class="fa fa-fw fa-linux"></i> SSH</div>
        <div id="S_rdp"  {{action "selectByState" "rdp"}}  class="S0 rdp pc"><i class="fa fa-fw fa-windows"></i> RDP</div>
        <div id="S_none" {{action "selectByState" "none"}} class="S0 none pc"><i class="fa fa-fw fa-ban red"></i> No OS</div>
        <div id="S_S3"   {{action "selectByState" "S3"}}   class="S3 pc"><i class="fa fa-fw fa-bed"></i> sleep</div>
        <div id="S_S4"   {{action "selectByState" "S4"}}   class="S4 pc"><i class="fa fa-fw fa-rocket"></i> hibernate</div>
        <div id="S_S5"   {{action "selectByState" "S5"}}   class="S5 pc"><i class="fa fa-fw fa-power-off"></i> soft-off</div>
        <div id="S_S16"  {{action "selectByState" "S16"}}  class="S16 pc"><i class="fa fa-fw fa-ban"></i> no reply</div>
        <div id="S_S0"   {{action "selectByState" "S0"}}   class="S0 pc" style="background:#888">powered up</div>
        <div id="S_pc"   {{action "selectByState" "pc"}}   class="pc">any</div>
      </p>
      {{#if selectedHostsCount}}
        <div id="ctrl">
          <h5>Action for selected <span id="numselected">{{selectedHostsCount}}</span>&nbsp;hosts</h5>
          <form>
            {{#each commandActions as |cmd|}}
              <label>{{radio-button name='cmd' value=cmd groupValue=selectedCmd}} {{cmd}}</label>
            {{/each}}
            ... using a inter-command-delay of {{input type="text" size=3 value=selectedDelay}} seconds
            {{#if selectedCmd}}
              <button class="btn btn-default" {{action 'submitJob'}}> <i class="fa fa-thumbs-up"></i> Do it</button>
            {{/if}}
          </form>
        </div>
      {{/if}}
    </div>
    {{else}}
    This room looks empty.
    Use {{#link-to "ou.hosts"}}Edit Hosts{{/link-to}} to add some hosts to this room.
    {{/if}}
    <!-- FIXME: {{controller.model}} is [object] instead of Ember.Ou if redir/login -->
  </div>
</div>
</script>

<!-- templates/ou/statelog.hbs.html (ou/statelog) -->
<script type="text/x-handlebars" id="ou/statelog">
<div class="row">
  <div class="col-lg-12">
    {{#if controllers.logdays.logdays}}
      {{my-select
        content=controllers.logdays.logdays.content
        selection=selectedDay
        action=(action 'selectLogday')
        prompt="Choose day"
        optionValuePath="dayUnixStart"
        optionLabelPath="dayString"
      }}
    {{/if}}
  </div>
</div>
<p></p>

<div class="row">
  <div class="col-lg-12 logs">
    <svg width="1440" height="12" preserveAspectRatio="none" viewBox="0 0 1440 12" style="width: 100%; max-width:1440px; height: auto;">
      <rect style="fill: transparent; stroke: #aaa;" height="12" width="1440" />
      {{#each dayHours as |hour|}}
        <rect x="{{hour.posX}}" y="1" width="59" height="18" style="stroke-width: 1; fill: #eee;"/>
        <text x="{{hour.textX}}" y="10" style="font-size:10px;">
          {{hour.hour}}:00
        </text>
      {{/each}}
    </svg>
  </div>
</div>

<div class="row">
  <div class="col-lg-12 logs">
    {{#if controllers.hosts.hosts}}
      {{#if logdata}}
        {{#each model.hosts as |host|}}
          {{state-log host=host logdata=logdata selectedDay=selectedDay}}
        {{/each}}
      {{else}}
       <h4>No logs found (or no day selected).</h4>
      {{/if}}
    {{/if}}
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
      <p></p>
      <p id="hselect" class="nopointer">
        <div id="S_ssh"  class="S0 ssh pc"><i class="fa fa-fw fa-linux"></i> SSH</div>
        <div id="S_rdp"  class="S0 rdp pc"><i class="fa fa-fw fa-windows"></i> RDP</div>
        <div id="S_none" class="S0 none pc"><i class="fa fa-fw fa-ban red"></i> No OS</div>
        <div id="S_S3"   class="S3 pc"><i class="fa fa-fw fa-bed"></i> sleep</div>
        <div id="S_S4"   class="S4 pc"><i class="fa fa-fw fa-rocket"></i> hibernate</div>
        <div id="S_S5"   class="S5 pc"><i class="fa fa-fw fa-power-off"></i> soft-off</div>
        <div id="S_S16"  class="S16 pc" style="background:#d9534f"><i class="fa fa-fw fa-ban"></i> no reply</div>
      </p>
  </div>
</div>
</script>

<!-- templates/ous/index.hbs.html (ous/index) -->
<script type="text/x-handlebars" id="ous/index">
{{! Display a table with all rooms }}
<h1 class="page-header">List of rooms</h1>
{{#if controllers.optionsets.optionsets}}
<table class="table table-striped">
  <thead>
    <tr>
      <th>Edit</th>
      <th>OU</th>
      <th>Name</th>
      <th>Description</th>
      <th>Optionset</th>
      <th>Log</th>
      <th>idle P [W]</th>
      <th>Hosts</th>
    </tr>
  </thead>
  <tbody>
  {{#each controllers.ous.content}}
    <tr>
      <td>{{#link-to 'ou.edit' this}}<i class="fa fa-edit"></i>{{/link-to}}</td>
      <td>{{ou_path}}</td>
      <td>{{name}}</td>
      <td>{{description}}</td>
      <td>{{optionset_id.name}}</td>
      <td>{{check-mark logging}}</td>
      <td>{{idle_power}}</td>
      <td>{{#link-to 'ou.hosts' this}}<i class="fa fa-edit"></i>{{/link-to}}</td>
    </tr>
  {{/each}}
  </tbody>
</table>
{{/if}}
</script>

<!-- templates/ous/new.hbs.html (ous/new) -->
<script type="text/x-handlebars" id="ous/new">
<h1 class="page-header">Create a new OU / room</h1>
{{partial "ou/edit"}}
{{#if parent_id}}
  <button class="btn btn-default" {{action 'doneEditingReturn'}}>
    <span class="fa fa-save"></span> Save new OU
  </button>
{{/if}}
</script>

<!-- templates/schedules/index.hbs.html (schedules/index) -->
<script type="text/x-handlebars" id="schedules/index">
{{! Display a table with (only) all scheduled job items }}
<h1 class="page-header">Scheduled power management</h1>
<table class="table table-striped">
<thead>
  <tr>
    <th>Job Description</th>
    <th>Mon</th>
    <th>Tue</th>
    <th>Wed</th>
    <th>Thu</th>
    <th>Fri</th>
    <th>Sat</th>
    <th>Sun</th>
    <th>Time</th>
    <th>Action</th>
    <th>OU</th>
    <th>Delay</th>
  </tr>
</thead>
<tbody>
{{#each model}}
{{#if isScheduledTask}}
  <tr>
    <td>{{#link-to 'schedule.edit' this}}<i class="fa fa-edit"></i> {{/link-to}}&nbsp;
    {{#link-to 'schedule.edit' this}}{{description}}{{/link-to}}</td>
    <td>{{check-mark on_monday}}</td>
    <td>{{check-mark on_tuesday}}</td>
    <td>{{check-mark on_wednesday}}</td>
    <td>{{check-mark on_thursday}}</td>
    <td>{{check-mark on_friday}}</td>
    <td>{{check-mark on_saturday}}</td>
    <td>{{check-mark on_sunday}}</td>
    <td>{{human_start_time}}</td>
    <td>{{amtc_cmd}}</td>
    <td>{{ou_id.name}}</td>
    <td>{{amtc_delay}}</td>
  </tr>
{{/if}}
{{/each}}
</tbody>
</table>
</script>

<!-- templates/schedules/new.hbs.html (schedules/new) -->
<script type="text/x-handlebars" id="schedules/new">
<h1 class="page-header">Create a new scheduled task</h1>
<p>
  Create a new scheduled task here - a remote power control job that is executed
  in the interval you specify here. Provide a description, select days the job should apply on.
</p>
{{partial "scheduleEdit"}}
<button class="btn btn-default" {{action 'doneEditingReturn'}}><span class="fa fa-save"></span> Save task</button>
</script>

<!-- templates/user/edit.hbs.html (user/edit) -->
<script type="text/x-handlebars" id="user/edit">
<div class="row">
  <div class="col-lg-12">
      <h1 class="page-header">Edit User <b>{{model.name}}</b></h1>
  </div>
</div>
<div class="row">
  <div class="col-lg-12">

    {{partial "userEdit"}}

    <div>
      <button {{action "removeUser"}} class="btn btn-default"><span class="fa fa-trash"></span> Delete User</button>
      <button class="btn btn-default" {{action 'doneEditingReturn'}}><span class="fa fa-save"></span> Save and return</button>
      {{#if isDirty}}<span class="label label-danger">unsaved changes</span>{{/if}}
    </div>

  </div>
</div>
</script>

<!-- templates/users/index.hbs.html (users/index) -->
<script type="text/x-handlebars" id="users/index">
{{! Display a table with all users }}
<h1 class="page-header">Users</h1>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Username</th>
      <th>Fullname</th>
      <th>Enabled?</th>
      <th>Admin?</th>
      <th>May control?</th>
    </tr>
  </thead>
  <tbody>
  {{#each model}}
    <tr>
      <td>{{#link-to 'user.edit' this}}{{name}}{{/link-to}}</td>
      <td>{{fullname}}</td>
      <td>{{check-mark is_enabled}}</td>
      <td>{{check-mark is_admin}}</td>
      <td>{{check-mark can_control}}</td>
    </tr>
  {{/each}}
  </tbody>
</table>
</script>

<!-- templates/users/new.hbs.html (users/new) -->
<script type="text/x-handlebars" id="users/new">
<div class="row">
  <div class="col-lg-12">
      <h1 class="page-header">Create User <b>{{name}}</b></h1>
  </div>
</div>
<div class="row">
  <div class="col-lg-12">

    {{partial "userEdit"}}

    <div>
      <button class="btn btn-default" {{action 'doneEditingReturn'}}>
        <span class="fa fa-save"></span> Create user
      </button>
    </div>

  </div>
</div>
</script>


<script src="js/jslibs.js"></script>
<script src="rest-api.php/rest-config.js"></script>

<noscript>
  <div class="jumbotron">
    <h1><span class="label label-danger">OMFG!</span> !#@$^~%-/</h1>
    <p><br>Please enable JavaScript in your browser to use amtc-web.</p>
  </div>
</noscript>

</body>
</html>
